<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Ready for PIRLS!</title>
    <!-- Tailwind CSS with Typography Plugin -->
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@300;400;600&family=Nunito:wght@400;700&display=swap" rel="stylesheet">
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    
    <style>
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0f9ff;
        }
        h1, h2, h3 {
            font-family: 'Fredoka', sans-serif;
        }
        .blob {
            position: absolute;
            filter: blur(40px);
            z-index: -1;
            opacity: 0.5;
            animation: move 10s infinite alternate;
        }
        @keyframes move {
            from { transform: translate(0, 0) scale(1); }
            to { transform: translate(20px, -20px) scale(1.1); }
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1);
        }
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #e0f2fe; 
        }
        ::-webkit-scrollbar-thumb {
            background: #38bdf8; 
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #0ea5e9; 
        }
        .loading-dots:after {
            content: ' .';
            animation: dots 1s steps(5, end) infinite;
        }
        @keyframes dots {
            0%, 20% { content: ' .'; }
            40% { content: ' ..'; }
            60% { content: ' ...'; }
            80%, 100% { content: ' '; }
        }
        /* Float Animation for Chat Button */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: float 3s ease-in-out infinite;
        }
        /* Active Nav Link Style */
        .nav-active {
            color: #2563eb !important; /* blue-600 */
            background-color: #eff6ff; /* blue-50 */
            border-radius: 0.5rem;
        }
        
        /* Modal Animation */
        .modal-enter {
            opacity: 0;
            transform: scale(0.9);
        }
        .modal-enter-active {
            opacity: 1;
            transform: scale(1);
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
        }
        .modal-exit {
            opacity: 1;
            transform: scale(1);
        }
        .modal-exit-active {
            opacity: 0;
            transform: scale(0.9);
            transition: opacity 0.2s ease-in, transform 0.2s ease-in;
        }
    </style>
</head>
<body class="text-slate-700 overflow-x-hidden">

    <!-- Background Blobs -->
    <div class="blob bg-blue-300 w-64 h-64 rounded-full top-0 left-0 -translate-x-1/2 -translate-y-1/2"></div>
    <div class="blob bg-yellow-200 w-96 h-96 rounded-full bottom-0 right-0 translate-x-1/3 translate-y-1/3"></div>

    <!-- Navigation -->
    <nav class="bg-white/90 backdrop-blur-md sticky top-0 z-50 border-b border-blue-100 shadow-sm transition-all duration-300" id="mainNav">
        <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <a href="#" class="flex items-center gap-2 group">
                    <div class="bg-blue-600 text-white p-2 rounded-lg group-hover:scale-110 transition-transform">
                        <i data-lucide="book-open" class="w-6 h-6"></i>
                    </div>
                    <span class="font-bold text-xl text-blue-900 tracking-wide">PIRLS Explorer</span>
                </a>
                <div class="hidden md:flex space-x-2">
                    <button onclick="openModal()" class="px-4 py-2 text-slate-600 hover:text-blue-600 font-bold transition rounded-lg">What is it?</button>
                    <a href="#expect" class="nav-link px-4 py-2 text-slate-600 hover:text-blue-600 font-bold transition rounded-lg">The Mission</a>
                    <a href="#practice" class="nav-link px-4 py-2 text-slate-600 hover:text-blue-600 font-bold transition rounded-lg">Practice Zone ‚ú®</a>
                    <a href="#tips" class="nav-link px-4 py-2 text-slate-600 hover:text-blue-600 font-bold transition rounded-lg">Pro Tips</a>
                </div>
                <!-- Mobile Menu Button (Visible on small screens) -->
                <button class="md:hidden text-blue-600 p-2" onclick="document.getElementById('mobileMenu').classList.toggle('hidden')">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
            <!-- Mobile Menu -->
            <div id="mobileMenu" class="hidden md:hidden pb-4 space-y-2">
                <button onclick="openModal(); document.getElementById('mobileMenu').classList.add('hidden')" class="block w-full text-left px-4 py-2 text-slate-600 hover:bg-blue-50 font-bold rounded-lg">What is it?</button>
                <a href="#expect" class="block px-4 py-2 text-slate-600 hover:bg-blue-50 font-bold rounded-lg" onclick="this.parentElement.classList.add('hidden')">The Mission</a>
                <a href="#practice" class="block px-4 py-2 text-slate-600 hover:bg-blue-50 font-bold rounded-lg" onclick="this.parentElement.classList.add('hidden')">Practice Zone</a>
                <a href="#tips" class="block px-4 py-2 text-slate-600 hover:bg-blue-50 font-bold rounded-lg" onclick="this.parentElement.classList.add('hidden')">Pro Tips</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="relative pt-16 pb-8 lg:pt-24 lg:pb-12">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 text-center">
            <div class="inline-block bg-blue-100 text-blue-800 px-4 py-1.5 rounded-full text-sm font-bold mb-6 animate-bounce">
                üéì Coming Soon to Your School!
            </div>
            <h1 class="text-4xl sm:text-6xl font-bold text-blue-900 mb-6 leading-tight">
                Ready to Show the World <br>
                <span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-teal-500">How You Read?</span>
            </h1>
            <p class="text-xl text-slate-600 mb-10 max-w-2xl mx-auto">
                You've been reading amazing stories and cool facts in class. Now, it's time to show off your skills in the <strong>PIRLS</strong> activity.
            </p>
            <div class="flex justify-center gap-4 mb-12">
                <a href="#practice" class="bg-blue-600 text-white px-8 py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-blue-700 transition transform hover:scale-105 flex items-center gap-2">
                    Try the Practice Zone ‚ú® <i data-lucide="sparkles" class="w-5 h-5"></i>
                </a>
            </div>

            <!-- Video Player Embed -->
            <div class="relative max-w-4xl mx-auto transform transition-all hover:scale-[1.01] duration-500 mb-4">
                <!-- Glowing backdrop effect -->
                <div class="absolute -inset-1 bg-gradient-to-r from-blue-400 via-purple-400 to-teal-400 rounded-3xl blur opacity-30 animate-pulse"></div>
                
                <!-- Video Container -->
                <div class="relative bg-white p-4 rounded-3xl shadow-2xl border border-white/50">
                    <div class="aspect-video rounded-2xl overflow-hidden bg-slate-900 shadow-inner relative">
                        <video class="w-full h-full object-cover" controls preload="metadata">
                            <!-- UPDATED VIDEO FILENAME HERE -->
                            <source src="PIRLS_Intro_Video.mp4" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    <div class="mt-4 flex items-center justify-center gap-2 text-blue-900/70 font-bold text-sm uppercase tracking-widest">
                        <i data-lucide="clapperboard" class="w-4 h-4"></i>
                        <span>Watch: Your Adventure Guide</span>
                    </div>
                </div>
            </div>

            <!-- "What is it" Trigger Button -->
            <div class="text-center animate-fade-in-up">
                <button onclick="openModal()" class="inline-flex items-center gap-2 text-slate-500 hover:text-blue-600 transition-colors text-sm font-semibold bg-white/50 px-4 py-2 rounded-full border border-slate-200 hover:border-blue-300 hover:bg-white">
                    üïµÔ∏è Psst... What is this test actually for? <i data-lucide="help-circle" class="w-4 h-4"></i>
                </button>
            </div>

            <!-- Navigation Arrow -->
            <div class="mt-6 animate-bounce text-blue-300">
                <a href="#expect" class="inline-block p-2 hover:text-blue-600 transition">
                    <i data-lucide="chevron-down" class="w-10 h-10"></i>
                </a>
            </div>

        </div>
    </header>

    <!-- Modal (Hidden by Default) -->
    <div id="whatModal" class="fixed inset-0 z-[100] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <!-- Backdrop -->
        <div class="fixed inset-0 bg-slate-900/60 backdrop-blur-sm transition-opacity opacity-0" id="modalBackdrop" onclick="closeModal()"></div>

        <!-- Panel -->
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div id="modalPanel" class="relative transform overflow-hidden rounded-2xl bg-white text-left shadow-2xl transition-all sm:my-8 sm:w-full sm:max-w-3xl opacity-0 scale-95 border-4 border-blue-100">
                    
                    <!-- Close Button (Top Right) -->
                    <div class="absolute right-0 top-0 pr-4 pt-4 block z-10">
                        <button type="button" class="rounded-md bg-white text-slate-400 hover:text-slate-500 focus:outline-none" onclick="closeModal()">
                            <span class="sr-only">Close</span>
                            <i data-lucide="x-circle" class="w-8 h-8 text-slate-300 hover:text-red-400 transition"></i>
                        </button>
                    </div>

                    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                        <div class="text-center sm:mt-0">
                             <div class="mx-auto flex h-16 w-16 flex-shrink-0 items-center justify-center rounded-full bg-blue-100 mb-4 animate-bounce">
                                <i data-lucide="file-search" class="h-8 w-8 text-blue-600"></i>
                            </div>
                            <h3 class="text-2xl font-bold leading-6 text-blue-900 mb-2" id="modal-title">Mission Briefing: Classified Info üìÅ</h3>
                            <div class="w-24 h-1 bg-yellow-400 mx-auto rounded-full mb-6"></div>

                            <div class="mt-4 text-left space-y-6">
                                <div class="grid md:grid-cols-2 gap-8">
                                    <div class="bg-blue-50 p-5 rounded-xl border border-blue-100">
                                        <div class="flex items-center gap-3 mb-2">
                                            <i data-lucide="globe-2" class="text-blue-600 w-5 h-5"></i>
                                            <h4 class="font-bold text-blue-900">It's a World Tour</h4>
                                        </div>
                                        <p class="text-sm text-slate-600">PIRLS stands for <em>Progress in International Reading Literacy Study</em>. Kids in over 50 countries take this exact same challenge!</p>
                                    </div>

                                    <div class="bg-teal-50 p-5 rounded-xl border border-teal-100">
                                        <div class="flex items-center gap-3 mb-2">
                                            <i data-lucide="school" class="text-teal-600 w-5 h-5"></i>
                                            <h4 class="font-bold text-teal-900">Helping Future Students</h4>
                                        </div>
                                        <p class="text-sm text-slate-600">Your answers help principals and teachers figure out how to make reading lessons even better for future students.</p>
                                    </div>
                                    
                                    <div class="bg-purple-50 p-5 rounded-xl border border-purple-100">
                                        <div class="flex items-center gap-3 mb-2">
                                            <i data-lucide="trophy" class="text-purple-600 w-5 h-5"></i>
                                            <h4 class="font-bold text-purple-900">Zero Stress Zone</h4>
                                        </div>
                                        <p class="text-sm text-slate-600"><strong>Good News:</strong> No grades! This doesn't go on your report card. It's just a check-up for our country's schools.</p>
                                    </div>

                                    <div class="bg-yellow-50 p-5 rounded-xl border border-yellow-100 relative overflow-hidden">
                                        <i data-lucide="clock" class="absolute -right-4 -bottom-4 w-24 h-24 text-yellow-100"></i>
                                        <div class="relative z-10">
                                            <div class="flex items-center gap-3 mb-2">
                                                <i data-lucide="calendar" class="text-yellow-600 w-5 h-5"></i>
                                                <h4 class="font-bold text-yellow-900">Rare Event</h4>
                                            </div>
                                            <p class="text-sm text-slate-600">This only happens every <strong>5 years</strong>. You are part of a very special group chosen to represent your grade!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-slate-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
                        <button type="button" class="inline-flex w-full justify-center rounded-lg bg-blue-600 px-5 py-3 text-sm font-semibold text-white shadow-sm hover:bg-blue-500 sm:ml-3 sm:w-auto transition-all" onclick="closeModal()">
                            Got it! Close Briefing
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Section 2: What to Expect (The "Content") -->
    <section id="expect" class="py-12 bg-blue-50 scroll-mt-20">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
            <div class="text-center mb-16">
                <span class="text-blue-600 font-bold tracking-wider uppercase text-sm">The Format</span>
                <h2 class="text-3xl font-bold text-blue-900 mt-2 mb-1">Your Reading Mission</h2>
                <p class="text-slate-600 max-w-2xl mx-auto">You will be given a booklet or a tablet with interesting things to read. There are two main types of reading you will do.</p>
            </div>

            <div class="grid md:grid-cols-2 gap-8 mb-12">
                <!-- Card 1 -->
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-blue-100 card-hover relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-orange-100 rounded-bl-full -mr-16 -mt-16 z-0"></div>
                    <div class="relative z-10">
                        <div class="w-14 h-14 bg-orange-500 text-white rounded-xl flex items-center justify-center mb-6 shadow-lg shadow-orange-200">
                            <i data-lucide="book-heart" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-slate-800 mb-3">1. Reading for Fun</h3>
                        <p class="text-slate-600 mb-4">
                            You will read a story. It might be an adventure, a mystery, or a tale about friendship.
                        </p>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="bg-white p-8 rounded-2xl shadow-sm border border-blue-100 card-hover relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-32 h-32 bg-blue-100 rounded-bl-full -mr-16 -mt-16 z-0"></div>
                    <div class="relative z-10">
                        <div class="w-14 h-14 bg-blue-500 text-white rounded-xl flex items-center justify-center mb-6 shadow-lg shadow-blue-200">
                            <i data-lucide="search" class="w-8 h-8"></i>
                        </div>
                        <h3 class="text-2xl font-bold text-slate-800 mb-3">2. Reading for Facts</h3>
                        <p class="text-slate-600 mb-4">
                            You will read an article or document to learn something new. It might be about animals, history, or science.
                        </p>
                    </div>
                </div>
            </div>

            <!-- NEW: Question Types Breakdown -->
            <div class="bg-white rounded-3xl p-8 md:p-10 border border-indigo-100 shadow-lg relative overflow-hidden mb-12">
                <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-400 to-purple-400"></div>
                <h3 class="text-2xl font-bold text-center text-indigo-900 mb-10">What do the questions look like?</h3>
                
                <div class="grid md:grid-cols-2 gap-10 relative z-10">
                    <!-- Type A -->
                    <div class="flex gap-5 items-start">
                        <div class="bg-yellow-100 p-4 rounded-2xl text-yellow-600 shrink-0 shadow-sm">
                            <i data-lucide="check-square" class="w-8 h-8"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-xl text-slate-800 mb-2">Multiple Choice</h4>
                            <p class="text-slate-600 leading-relaxed">
                                You will see a question and 4 possible answers (A, B, C, D). You just have to click or circle the one that fits best. It's like finding the right puzzle piece!
                            </p>
                        </div>
                    </div>

                    <!-- Type B -->
                    <div class="flex gap-5 items-start">
                        <div class="bg-teal-100 p-4 rounded-2xl text-teal-600 shrink-0 shadow-sm">
                            <i data-lucide="pencil" class="w-8 h-8"></i>
                        </div>
                        <div>
                            <h4 class="font-bold text-xl text-slate-800 mb-2">Written Answers</h4>
                            <p class="text-slate-600 leading-relaxed">
                                Sometimes, you will need to write the answer in your own words. Don't panic! Usually, just one or two sentences describing what you read is perfect.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Next Section Button -->
            <div class="text-center">
                <a href="#practice" class="inline-flex items-center gap-2 bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-4 rounded-full font-bold transition-all shadow-lg hover:shadow-xl hover:-translate-y-1 group">
                    Let's Practice! ‚ú® <i data-lucide="arrow-down" class="w-5 h-5 group-hover:translate-y-1 transition"></i>
                </a>
            </div>

        </div>
    </section>

    <!-- NEW SECTION: AI Interactive Features -->
    <section id="practice" class="py-16 bg-white relative overflow-hidden scroll-mt-20">
        <!-- Decoration -->
        <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-blue-400 via-purple-400 to-teal-400"></div>
        
        <div class="max-w-6xl mx-auto px-4 sm:px-6">
            <div class="text-center mb-12">
                <span class="inline-flex items-center gap-2 bg-indigo-100 text-indigo-800 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider mb-2">
                    <i data-lucide="sparkles" class="w-3 h-3"></i> Powered by Gemini AI
                </span>
                <h2 class="text-3xl font-bold text-slate-900">Interactive Practice Zone</h2>
                <p class="text-slate-600 mt-2">Try these magic tools to get ready!</p>
            </div>

            <div class="grid lg:grid-cols-2 gap-8 mb-16">
                
                <!-- FEATURE 1: Reading Passage Generator -->
                <div class="bg-gradient-to-b from-blue-50 to-white p-8 rounded-3xl border border-blue-100 shadow-lg">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="bg-blue-600 text-white p-3 rounded-xl shadow-md">
                            <i data-lucide="pen-tool" class="w-6 h-6"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-blue-900">Mini-Reading Generator</h3>
                            <p class="text-sm text-blue-600">Pick a topic, get a short story & question!</p>
                        </div>
                    </div>

                    <!-- Level Selector -->
                    <div class="bg-blue-100/50 p-1 rounded-lg flex gap-1 mb-4">
                        <button onclick="setLevel('Easy')" id="btn-Easy" class="flex-1 py-1.5 px-3 rounded-md text-sm font-bold transition text-blue-400 hover:text-blue-600">Easy</button>
                        <button onclick="setLevel('Medium')" id="btn-Medium" class="flex-1 py-1.5 px-3 rounded-md text-sm font-bold transition bg-white text-blue-600 shadow-sm">Medium</button>
                        <button onclick="setLevel('Hard')" id="btn-Hard" class="flex-1 py-1.5 px-3 rounded-md text-sm font-bold transition text-blue-400 hover:text-blue-600">Challenge</button>
                    </div>

                    <div class="space-y-4">
                        <div class="grid grid-cols-3 gap-2">
                            <button onclick="generatePassage('Dinosaurs', 'Fact')" class="bg-white border border-blue-200 hover:bg-blue-100 text-blue-800 py-2 rounded-lg text-sm font-semibold transition">ü¶ñ Dinosaurs</button>
                            <button onclick="generatePassage('Space Adventure', 'Story')" class="bg-white border border-blue-200 hover:bg-blue-100 text-blue-800 py-2 rounded-lg text-sm font-semibold transition">üöÄ Space</button>
                            <button onclick="generatePassage('Friendship', 'Story')" class="bg-white border border-blue-200 hover:bg-blue-100 text-blue-800 py-2 rounded-lg text-sm font-semibold transition">ü§ù Friends</button>
                        </div>
                        
                        <div class="flex gap-2">
                            <input type="text" id="customTopic" placeholder="Or type your own topic..." class="flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-400 outline-none text-sm">
                            <button onclick="generateCustomPassage()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-1">
                                Go ‚ú®
                            </button>
                        </div>

                        <!-- Result Area -->
                        <div id="passageResult" class="hidden mt-6 bg-white p-6 rounded-xl border border-blue-100 min-h-[200px] shadow-inner text-sm">
                            <!-- Content injected here -->
                        </div>
                        <div id="passageLoader" class="hidden mt-6 text-center py-8">
                            <div class="inline-block animate-spin text-blue-500 mb-2">
                                <i data-lucide="loader-2" class="w-8 h-8"></i>
                            </div>
                            <p class="text-blue-500 font-bold loading-dots">Writing a story for you</p>
                        </div>
                    </div>
                </div>

                <!-- FEATURE 2: Confidence Booster -->
                <div class="bg-gradient-to-b from-purple-50 to-white p-8 rounded-3xl border border-purple-100 shadow-lg flex flex-col">
                    <div class="flex items-center gap-3 mb-6">
                        <div class="bg-purple-600 text-white p-3 rounded-xl shadow-md">
                            <i data-lucide="heart-handshake" class="w-6 h-6"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-bold text-purple-900">Confidence Booster</h3>
                            <p class="text-sm text-purple-600">Feeling nervous? Let's talk about it.</p>
                        </div>
                    </div>

                    <div class="flex-1 flex flex-col">
                        <label class="text-sm font-bold text-slate-700 mb-2">How are you feeling right now?</label>
                        <textarea id="feelingInput" class="w-full p-4 border border-purple-200 rounded-xl focus:ring-2 focus:ring-purple-400 outline-none resize-none bg-white mb-4" rows="3" placeholder="e.g., I'm scared I won't finish in time..."></textarea>
                        
                        <button onclick="getBoost()" class="w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-xl font-bold transition shadow-md flex justify-center items-center gap-2 mb-6">
                            Boost My Confidence! ‚ú®
                        </button>

                        <!-- Result Area -->
                        <div id="boostResult" class="hidden bg-purple-100 p-6 rounded-xl border border-purple-200 text-purple-900 relative">
                            <i data-lucide="quote" class="w-8 h-8 text-purple-300 absolute top-2 left-2 opacity-50"></i>
                            <div id="boostText" class="relative z-10 italic font-medium text-lg leading-relaxed"></div>
                        </div>
                        
                        <div id="boostLoader" class="hidden text-center py-4">
                            <div class="inline-block animate-spin text-purple-500">
                                <i data-lucide="loader-2" class="w-6 h-6"></i>
                            </div>
                            <span class="text-purple-500 ml-2 font-bold loading-dots">Thinking of something nice</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Next Section Button -->
            <div class="text-center">
                <a href="#tips" class="inline-flex items-center gap-2 bg-white border-2 border-purple-100 hover:border-purple-400 text-purple-900 px-6 py-3 rounded-full font-bold transition-all hover:shadow-md group">
                    Get Expert Tips üß† <i data-lucide="arrow-down" class="w-4 h-4 group-hover:translate-y-1 transition"></i>
                </a>
            </div>

        </div>
    </section>

    <!-- Section 3: How to Prepare (The "Tips") -->
    <section id="tips" class="py-16 bg-blue-50 scroll-mt-20">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
            <h2 class="text-3xl font-bold text-blue-900 mb-12 text-center">How to be a PIRLS Pro</h2>
            
            <div class="grid md:grid-cols-3 gap-6 mb-12">
                <!-- Tip 1 -->
                <div class="bg-white p-6 rounded-2xl border border-green-200 shadow-sm">
                    <div class="w-12 h-12 rounded-full flex items-center justify-center bg-green-100 text-green-600 font-bold text-xl mb-4">1</div>
                    <h3 class="text-xl font-bold text-green-900 mb-2">Don't Cram!</h3>
                    <p class="text-slate-600">The best practice is simply reading books you enjoy.</p>
                </div>
                
                <!-- Tip 2 -->
                <div class="bg-white p-6 rounded-2xl border border-blue-200 shadow-sm">
                    <div class="w-12 h-12 rounded-full flex items-center justify-center bg-blue-100 text-blue-600 font-bold text-xl mb-4">2</div>
                    <h3 class="text-xl font-bold text-blue-900 mb-2">Power Up</h3>
                    <p class="text-slate-600">Get sleep and eat a healthy breakfast so your brain has energy.</p>
                </div>

                <!-- Tip 3 -->
                <div class="bg-white p-6 rounded-2xl border border-purple-200 shadow-sm">
                    <div class="w-12 h-12 rounded-full flex items-center justify-center bg-purple-100 text-purple-600 font-bold text-xl mb-4">3</div>
                    <h3 class="text-xl font-bold text-purple-900 mb-2">Stay Calm</h3>
                    <p class="text-slate-600">If you don't know a word, just read the sentence around it to guess.</p>
                </div>
            </div>

            <!-- Conclusion Banner (Replaces "Next Stop") -->
            <div class="text-center">
                <div class="inline-block bg-gradient-to-r from-blue-500 to-teal-400 text-white px-8 py-4 rounded-3xl font-bold shadow-lg transform rotate-1 animate-pulse">
                    You Are Ready! üåü Good Luck!
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-blue-900 text-white py-12">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <i data-lucide="star" class="w-12 h-12 text-yellow-400 mx-auto mb-4 fill-current"></i>
            <h2 class="text-3xl font-bold mb-4">You've Got This!</h2>
            <p class="text-blue-200 mb-8 text-lg">Believe in yourself, read carefully, and have fun with the stories.</p>
            <div class="text-sm text-blue-400 border-t border-blue-800 pt-8">
                Designed for Students ‚Ä¢ Progress in International Reading Literacy Study
            </div>
        </div>
    </footer>

    <!-- Floating Chat Button (Bottom Right) -->
    <a href="https://pirlspal-10038831.chipp.ai" target="_blank" rel="noopener noreferrer" 
    class="fixed bottom-6 right-6 z-50 flex items-center gap-3 group">
        <div class="bg-white text-blue-900 px-4 py-2 rounded-xl shadow-lg border border-blue-100 font-bold text-sm transform transition-all group-hover:scale-105 origin-right hidden md:block animate-float">
            Have questions? Click here! üëã
        </div>
        <div class="bg-indigo-600 text-white p-4 rounded-full shadow-xl hover:bg-indigo-700 transition transform hover:scale-110 hover:rotate-12 border-4 border-white">
            <i data-lucide="message-circle-question" class="w-8 h-8"></i>
        </div>
    </a>

    <!-- Floating Download Flyout (Bottom Left) -->
    <div class="fixed bottom-6 left-6 z-50 flex flex-col items-start gap-4 group">
        <!-- The Menu Items (Hidden by default, shown on hover of container) -->
        <div class="flex flex-col gap-2 transition-all duration-300 transform translate-y-10 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 pointer-events-none group-hover:pointer-events-auto mb-2">
            <a href="P06_UG_SamplePassages1_Items.pdf" target="_blank" class="bg-white text-slate-700 px-4 py-3 rounded-xl shadow-xl border border-blue-100 hover:bg-red-50 hover:text-red-600 hover:border-red-200 transition flex items-center gap-3 font-bold text-sm w-64">
                <div class="bg-red-100 p-2 rounded-lg text-red-600"><i data-lucide="file-text" class="w-4 h-4"></i></div>
                <div>
                    <span class="block">2006 Sample Pack</span>
                    <span class="text-xs font-normal text-slate-400">Antarctica, Clay...</span>
                </div>
            </a>
            <a href="passage_full.pdf" target="_blank" class="bg-white text-slate-700 px-4 py-3 rounded-xl shadow-xl border border-blue-100 hover:bg-red-50 hover:text-red-600 hover:border-red-200 transition flex items-center gap-3 font-bold text-sm w-64">
                <div class="bg-red-100 p-2 rounded-lg text-red-600"><i data-lucide="file-bar-chart-2" class="w-4 h-4"></i></div>
                <div>
                    <span class="block">2011 Sample Pack</span>
                    <span class="text-xs font-normal text-slate-400">Enemy Pie, Hiking...</span>
                </div>
            </a>
        </div>

        <!-- The Main Button -->
        <button class="bg-red-500 hover:bg-red-600 text-white px-6 py-4 rounded-full shadow-2xl flex items-center gap-3 transition-all hover:scale-105 active:scale-95 group-hover:rounded-2xl relative overflow-visible ring-4 ring-white/30">
             <!-- Animated Badge -->
            <span class="absolute -top-3 -right-3 bg-yellow-400 text-yellow-900 text-xs font-black px-2 py-1 rounded-full animate-bounce shadow-sm transform rotate-12 border-2 border-white">
                Samples!
            </span>
            
            <i data-lucide="download" class="w-6 h-6 animate-pulse"></i>
            <span class="font-bold tracking-wide">Practice Tests</span>
            <i data-lucide="chevron-up" class="w-4 h-4 text-red-200 group-hover:rotate-180 transition-transform"></i>
        </button>
    </div>

    <!-- Back to Top Button (Bottom Center) -->
    <button id="backToTop" onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-40 bg-white text-blue-600 p-3 rounded-full shadow-lg border-2 border-blue-100 opacity-0 translate-y-10 transition-all duration-300 hover:scale-110 hover:bg-blue-50 focus:outline-none pointer-events-none">
        <i data-lucide="rocket" class="w-6 h-6"></i>
    </button>

    <!-- Initialize Lucide Icons -->
    <script>
        lucide.createIcons();
    </script>

    <!-- Navigation & Scroll Logic -->
    <script>
        // 1. Highlight Active Nav Link
        const sections = document.querySelectorAll("section");
        const navLinks = document.querySelectorAll(".nav-link");

        const observerOptions = {
            root: null,
            rootMargin: "0px",
            threshold: 0.3 // Trigger when 30% of the section is visible
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    navLinks.forEach(link => {
                        link.classList.remove("nav-active");
                        const href = link.getAttribute("href");
                        if (href && href.substring(1) === entry.target.id) {
                            link.classList.add("nav-active");
                        }
                    });
                }
            });
        }, observerOptions);

        sections.forEach(section => observer.observe(section));

        // 2. Back to Top Button Logic
        const backToTopBtn = document.getElementById('backToTop');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 300) {
                backToTopBtn.classList.remove('opacity-0', 'translate-y-10', 'pointer-events-none');
            } else {
                backToTopBtn.classList.add('opacity-0', 'translate-y-10', 'pointer-events-none');
            }
        });

        // 3. Modal Logic
        const modal = document.getElementById('whatModal');
        const modalPanel = document.getElementById('modalPanel');
        const modalBackdrop = document.getElementById('modalBackdrop');

        function openModal() {
            modal.classList.remove('hidden');
            // Allow a small delay for display:none to clear before adding opacity
            setTimeout(() => {
                modalBackdrop.classList.remove('opacity-0');
                modalPanel.classList.remove('opacity-0', 'scale-95');
                modalPanel.classList.add('opacity-100', 'scale-100');
            }, 10);
        }

        function closeModal() {
            modalBackdrop.classList.add('opacity-0');
            modalPanel.classList.remove('opacity-100', 'scale-100');
            modalPanel.classList.add('opacity-0', 'scale-95');
            
            // Wait for transition to finish before hiding
            setTimeout(() => {
                modal.classList.add('hidden');
            }, 300);
        }
    </script>

    <!-- Gemini API Logic -->
    <script>
        const apiKey = ""; // Empty string for GitHub deployment

        // ---------------------------------------------------------
        // MOCK DATA (Simulation Mode for GitHub/Offline use)
        // ---------------------------------------------------------
        const mockStories = {
            'Dinosaurs': {
                'Easy': `**The Text:**
The T-Rex was a very big dinosaur. It had huge teeth. It walked on two legs. It was the king of the jungle!

**Quick Question:**
How many legs did the T-Rex walk on?
* A) Four legs
* B) Two legs
* C) Six legs

**Answer:**
B) Two legs. The text says "It walked on two legs."`,
                'Medium': `**The Text:**
Long ago, the T-Rex was the king of the dinosaurs. It had huge teeth and tiny arms. Even though its arms were small, it was very strong. The T-Rex walked on two legs and hunted for food in the jungle.

**Quick Question:**
What is true about the T-Rex?
* A) It had huge arms.
* B) It walked on four legs.
* C) It was very strong.

**Answer:**
C) It was very strong. The text says "it was very strong" even though it had small arms.`,
                'Hard': `**The Text:**
The Tyrannosaurus Rex was a formidable predator during the Cretaceous period. Despite having disproportionately small forelimbs, its jaw power was immense. Paleontologists believe it was a scavenger as well as a hunter.

**Quick Question:**
What does the word "immense" suggest about the T-Rex's jaw?
* A) It was very weak.
* B) It was extremely powerful.
* C) It was broken.

**Answer:**
B) It was extremely powerful. In this context, "immense" describes the great power of its jaw.`
            },
            'Space Adventure': {
                'Easy': `**The Text:**
Mia went to the moon in a rocket. The moon was grey and quiet. She jumped very high. It was fun to float in space!

**Quick Question:**
What color was the moon?
* A) Blue
* B) Grey
* C) Green

**Answer:**
B) Grey. The text says "The moon was grey and quiet."`,
                'Medium': `**The Text:**
Mia looked out the window of her rocket ship. The moon was getting closer! It looked like a big, grey rock with holes in it. "Preparing for landing," she said. She was ready to be the first kid to walk on the moon.

**Quick Question:**
What did the moon look like to Mia?
* A) A big yellow cheese.
* B) A grey rock with holes.
* C) A bright shining star.

**Answer:**
B) A grey rock with holes. The text describes it as a "big, grey rock with holes in it."`,
                'Hard': `**The Text:**
As the lunar module descended, Mia checked her oxygen levels. The desolate, cratered surface of the moon loomed below. She felt a mix of exhilaration and anxiety knowing she was about to make history.

**Quick Question:**
How was Mia feeling as she descended?
* A) Only happy.
* B) Bored and tired.
* C) Both excited and nervous.

**Answer:**
C) Both excited and nervous. The text says she felt "a mix of exhilaration (excitement) and anxiety (nervousness)." `
            },
            'Friendship': {
                'Easy': `**The Text:**
Leo had a toy car. Sam wanted to play. Leo gave Sam the car. Sam smiled. They played together all day.

**Quick Question:**
Why did Sam smile?
* A) Leo gave him the car.
* B) Sam went home.
* C) The car was broken.

**Answer:**
A) Leo gave him the car. The text says "Leo gave Sam the car. Sam smiled."`,
                'Medium': `**The Text:**
Leo had a new toy car. His friend Sam really wanted to play with it. Leo felt sad when he had to share, but then he saw Sam smile. Playing together was much more fun than playing alone.

**Quick Question:**
Why did playing together become fun?
* A) Because Sam brought his own car.
* B) Because Leo liked seeing Sam smile.
* C) Because the car broke.

**Answer:**
B) Because Leo liked seeing Sam smile. The text implies Leo realized sharing made them both happy.`,
                'Hard': `**The Text:**
Leo clutched his new model car tightly. He noticed Sam watching him with longing eyes. After a moment of internal conflict, Leo reluctantly handed over the prized vehicle. Seeing Sam's face light up made Leo realize that generosity was more rewarding than possession.

**Quick Question:**
What lesson did Leo learn?
* A) That he should never share his toys.
* B) That giving makes you feel better than keeping things.
* C) That Sam didn't like cars.

**Answer:**
B) That giving makes you feel better than keeping things. The text says he realized "generosity was more rewarding than possession."`
            },
            'default': {
                'Easy': `**The Text:**
The library has many books. You can read about dogs or space. It is quiet there. I love to read.

**Quick Question:**
What can you read about?
* A) Only dogs.
* B) Dogs or space.
* C) Nothing.

**Answer:**
B) Dogs or space. The text lists these two examples.`,
                'Medium': `**The Text:**
The library is a quiet place full of adventures. You can travel to the past, the future, or magical worlds just by opening a book. Every shelf holds a new surprise waiting to be discovered.

**Quick Question:**
What can you find on every shelf?
* A) A new surprise.
* B) A loud noise.
* C) A computer.

**Answer:**
A) A new surprise. The text says "Every shelf holds a new surprise."`,
                'Hard': `**The Text:**
Libraries serve as gateways to infinite knowledge. They are not merely repositories for books, but community hubs where imagination is ignited. In a digital age, the tactile experience of turning a page remains a unique pleasure for many.

**Quick Question:**
According to the text, what are libraries besides places for books?
* A) They are just old buildings.
* B) They are places that spark imagination.
* C) They are places to sleep.

**Answer:**
B) They are places that spark imagination. The text calls them "community hubs where imagination is ignited."`
            }
        };

        const mockBoosts = [
            "You are doing great! Just breathe and believe in yourself. üåü",
            "Trust your brain! You have learned so much already. üß†",
            "It's normal to be nervous. That just means you care! You got this. üí™",
            "One question at a time. You are a reading superstar! ‚≠ê"
        ];

        // ---------------------------------------------------------
        // LOGIC
        // ---------------------------------------------------------

        let currentLevel = 'Medium';

        function setLevel(level) {
            currentLevel = level;
            ['Easy', 'Medium', 'Hard'].forEach(l => {
                const btn = document.getElementById(`btn-${l}`);
                if (l === level) {
                    btn.className = "flex-1 py-1.5 px-3 rounded-md text-sm font-bold transition bg-white text-blue-600 shadow-sm ring-1 ring-blue-200";
                } else {
                    btn.className = "flex-1 py-1.5 px-3 rounded-md text-sm font-bold transition text-blue-400 hover:text-blue-600 hover:bg-blue-50";
                }
            });
        }

        async function callGemini(prompt, type) {
            // SIMULATION MODE: If no API key, use mock data
            if (!apiKey || apiKey === "") {
                console.log("No API Key detected. Using Simulation Mode.");
                await new Promise(r => setTimeout(r, 1500)); // Fake delay for realism
                
                if (type === 'boost') {
                    return mockBoosts[Math.floor(Math.random() * mockBoosts.length)];
                } else {
                    // Identify Topic
                    let key = 'default';
                    if (prompt.includes('Dinosaurs')) key = 'Dinosaurs';
                    else if (prompt.includes('Space')) key = 'Space Adventure';
                    else if (prompt.includes('Friendship')) key = 'Friendship';
                    
                    // Return story based on Topic AND Level
                    // Fallback to Medium if level is somehow missing, or default topic if key is missing
                    const topicData = mockStories[key] || mockStories['default'];
                    return topicData[currentLevel] || topicData['Medium'];
                }
            }

            // REAL AI MODE
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: prompt }] }]
            };

            try {
                const response = await fetch(url, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "I couldn't think of a response right now. Try again!";
            } catch (error) {
                // Fallback to mock if API fails
                if (type === 'boost') return mockBoosts[0];
                const topicData = mockStories['default'];
                return topicData[currentLevel] || topicData['Medium'];
            }
        }

        /* --- Feature 1: Passage Generator --- */
        async function generatePassage(topic, type) {
            showPassageLoading(true);
            
            let levelInstruction = "";
            if (currentLevel === 'Easy') levelInstruction = "Use simple vocabulary, shorter sentences, and very clear structure (lower 4th grade level).";
            if (currentLevel === 'Medium') levelInstruction = "Use standard 4th grade vocabulary and sentence structure.";
            if (currentLevel === 'Hard') levelInstruction = "Use slightly advanced vocabulary and more complex sentence structures (challenging for 4th grade).";

            const prompt = `Write a short, engaging ${type === 'Fact' ? 'informational text' : 'story'} (approx 60-100 words) about ${topic}. 
            
            Difficulty Level: ${currentLevel}. ${levelInstruction}
            
            Structure your response exactly like this with these specific headers:
            
            **The Text:**
            (The story/text goes here)

            **Quick Question:**
            (A multiple choice question about the text. ensure options are on separate lines)
            
            * A) (Option 1)
            * B) (Option 2)
            * C) (Option 3)

            **Answer:**
            (The correct letter and a brief explanation why)`;

            // Pass 'story' type to help mock selector
            const result = await callGemini(prompt, 'story');
            renderPassage(result);
            showPassageLoading(false);
        }

        function generateCustomPassage() {
            const topic = document.getElementById('customTopic').value;
            if(!topic.trim()) return;
            generatePassage(topic, 'Story');
        }

        function showPassageLoading(isLoading) {
            const resultDiv = document.getElementById('passageResult');
            const loaderDiv = document.getElementById('passageLoader');
            
            if (isLoading) {
                resultDiv.classList.add('hidden');
                loaderDiv.classList.remove('hidden');
            } else {
                loaderDiv.classList.add('hidden');
                resultDiv.classList.remove('hidden');
            }
        }

        function renderPassage(text) {
            // Split answer from the rest to hide it
            const parts = text.split('**Answer:**');
            const mainContent = parts[0]; 
            const answerContent = parts[1] ? parts[1].trim() : "Answer not found.";

            const htmlMain = marked.parse(mainContent);
            const htmlAnswer = marked.parse(answerContent);
            
            const container = document.getElementById('passageResult');
            container.innerHTML = `
                <div class="prose prose-sm prose-blue max-w-none">
                    ${htmlMain}
                </div>
                <div class="mt-6 pt-4 border-t border-blue-100 flex flex-col items-start">
                    <button onclick="this.nextElementSibling.classList.remove('hidden'); this.style.display='none'" 
                            class="bg-yellow-400 hover:bg-yellow-500 text-yellow-900 px-4 py-2 rounded-lg text-sm font-bold transition shadow-sm flex items-center gap-2">
                        üëÄ Reveal Answer
                    </button>
                    <div class="hidden w-full bg-green-50 border border-green-200 rounded-xl p-4 mt-2 animate-in fade-in slide-in-from-top-2">
                        <div class="flex items-start gap-3">
                            <div class="bg-green-100 p-2 rounded-full text-green-600 mt-1">
                                <i data-lucide="check" class="w-4 h-4"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-green-900 text-sm uppercase tracking-wide mb-1">Correct Answer</h4>
                                <div class="text-green-800 text-sm">${htmlAnswer}</div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            lucide.createIcons();
        }


        /* --- Feature 2: Confidence Booster --- */
        async function getBoost() {
            const feeling = document.getElementById('feelingInput').value;
            if(!feeling.trim()) return;

            showBoostLoading(true);

            const prompt = `You are a kind, supportive teacher speaking to a 4th grade student who is about to take a reading test. They say: "${feeling}". Write a short (2-3 sentences), warm, and encouraging response to boost their confidence. Use simple language. Add one emoji.`;

            // Pass 'boost' type to help mock selector
            const result = await callGemini(prompt, 'boost');
            
            document.getElementById('boostText').innerText = result;
            showBoostLoading(false);
        }

        function showBoostLoading(isLoading) {
            const resultDiv = document.getElementById('boostResult');
            const loaderDiv = document.getElementById('boostLoader');
            
            if (isLoading) {
                resultDiv.classList.add('hidden');
                loaderDiv.classList.remove('hidden');
            } else {
                loaderDiv.classList.add('hidden');
                resultDiv.classList.remove('hidden');
            }
        }
    </script>
</body>
</html>
